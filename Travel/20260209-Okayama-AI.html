<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å»£å³¶å²¡å±±å…«å¤©ä¸ƒå¤œæ·±åº¦éŠæ”»ç•¥</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Font Awesome (for icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'torii-red': '#cc4e42',
                        'okayama-peach': '#ffb7b2',
                        'warm-bg': '#fcfbf9',
                        'soft-black': '#4a4a4a',
                        'slate-blue': '#475569',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #fcfbf9;
            color: #4a4a4a;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .timeline-line {
            position: absolute;
            left: 1.25rem;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #e5e7eb;
            z-index: 0;
        }
        .tab-active {
            background-color: #cc4e42;
            color: white;
            font-weight: bold;
        }
        .tab-inactive {
            background-color: white;
            color: #4a4a4a;
            border: 1px solid #e5e7eb;
        }
        .tab-inactive:hover {
            background-color: #ffe4e1;
        }
        /* Hide scrollbar for clean horizontal scroll */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-warm-bg">

    <!-- Chosen Palette: Warm Neutrals with Torii Red (#cc4e42) and Okayama Peach (#ffb7b2) accents for a calm, inviting travel vibe. -->

    <!-- Application Structure Plan: 
         1. Header: Trip Overview & Stats.
         2. Dashboard Section: Visualizes estimated costs and activity balance using charts to give a high-level understanding.
         3. Interactive Itinerary (The Core): A tabbed interface for Days 1-8. This is chosen to prevent information overload. 
            Inside each day:
            - Timeline: Vertical flow of time/activities.
            - Food Spotlight: Highlight cards for that day's meals.
            - Transport Info: Specific cost/time details for movement.
         4. Discovery Grid: Filtering specific recommendations (Shopping vs. Food) across the whole trip.
         5. Travel Tips: Collapsible practical advice.
    -->

    <!-- Visualization & Content Choices:
         - Transport Cost Chart (Doughnut): Goal is to show where the budget goes. Interaction: Tooltip.
         - Activity Intensity Chart (Bar): Goal is to show the pace of the trip. Interaction: Tooltip.
         - Timeline Components: HTML/Tailwind vertical lists for readability.
         - Food Cards: Styled HTML divs with Unicode icons to replace images (NO SVG/Images).
         - Confirmation: NO SVG graphics used. NO Mermaid JS used.
    -->

    <!-- Header Section -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-torii-red">å»£å³¶å²¡å±±ç€¨æˆ¶å…§æµ·ä¹‹æ—…</h1>
                <p class="text-sm text-gray-500">2025/2/9 - 2/16 (8å¤©7å¤œ)</p>
            </div>
            <div class="text-right hidden sm:block">
                <span class="bg-okayama-peach text-red-800 text-xs px-2 py-1 rounded-full">å»£å³¶é€²å²¡å±±å‡º</span>
                <span class="bg-slate-200 text-slate-800 text-xs px-2 py-1 rounded-full ml-2">è‡ªé§• + éµè·¯</span>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">

        <!-- Introduction -->
        <section>
            <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-torii-red">
                <h2 class="text-xl font-bold mb-2">æ—…ç¨‹æ¦‚è¦½</h2>
                <p class="text-gray-600 leading-relaxed">
                    æ­¡è¿ä½¿ç”¨æ‚¨çš„å°ˆå±¬äº’å‹•è¡Œç¨‹è¡¨ã€‚æœ¬æ‡‰ç”¨ç¨‹å¼å°‡é€™è¶Ÿã€Œå»£å³¶é€²ã€å²¡å±±å‡ºã€çš„ç¶“å…¸ç€¨æˆ¶å…§æµ·è¡Œç¨‹è½‰åŒ–ç‚ºè¦–è¦ºåŒ–çš„å„€è¡¨æ¿ã€‚
                    æ‚¨å¯ä»¥é€éä¸‹æ–¹çš„äº’å‹•åœ–è¡¨äº†è§£é ç®—åˆ†ä½ˆï¼Œä¸¦é»æ“Šæ¯æ—¥æ¨™ç±¤æ·±å…¥æŸ¥çœ‹è©³ç´°çš„æ™‚é–“å®‰æ’ã€äº¤é€šæ–¹å¼èˆ‡å¿…åƒç¾é£Ÿã€‚
                    é€™è¶Ÿæ—…ç¨‹å®Œç¾çµåˆäº†æ­·å²å·¡ç¦®ï¼ˆå»£å³¶ï¼‰ã€è‡ªç„¶çµ•æ™¯ï¼ˆå®®å³¶ã€ç€¨æˆ¶å¤§æ©‹ï¼‰èˆ‡è³¼ç‰©ä¼‘é–’ï¼ˆå€‰æ•·ã€å²¡å±±ï¼‰ã€‚
                </p>
            </div>
        </section>

        <!-- Dashboard Section: Charts -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Cost Chart -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="text-lg font-bold mb-4 text-slate-700">ğŸ’° é ä¼°äº¤é€šèˆ‡ç¥¨åˆ¸é ç®—åˆ†ä½ˆ (å–®äºº)</h3>
                <p class="text-sm text-gray-500 mb-4">æ­¤åœ–è¡¨é¡¯ç¤ºè¡Œç¨‹ä¸­ä¸»è¦çš„å¤§é¡äº¤é€šèˆ‡é–€ç¥¨æ”¯å‡ºæ¯”ä¾‹ï¼ŒåŠ©æ‚¨æº–å‚™æ—¥å¹£ç¾é‡‘æˆ–å„²å€¼å¡ã€‚</p>
                <div class="chart-container">
                    <canvas id="costChart"></canvas>
                </div>
            </div>
            
            <!-- Activity Balance Chart -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="text-lg font-bold mb-4 text-slate-700">ğŸƒ è¡Œç¨‹ç¯€å¥èˆ‡å¼·åº¦</h3>
                <p class="text-sm text-gray-500 mb-4">åˆ†ææ¯æ—¥çš„ä¸»è¦æ´»å‹•æ•¸é‡ï¼Œå”åŠ©æ‚¨èª¿é…é«”åŠ›ã€‚Day 5 (è‡ªé§•çˆ¬éšæ¢¯) èˆ‡ Day 2 (å®®å³¶æ­¥è¡Œ) å¼·åº¦è¼ƒé«˜ã€‚</p>
                <div class="chart-container">
                    <canvas id="activityChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Interactive Itinerary Section -->
        <section id="itinerary-section">
            <h2 class="text-2xl font-bold mb-6 text-center text-slate-700">ğŸ“… æ¯æ—¥è¡Œç¨‹è©³æƒ…</h2>
            <p class="text-center text-gray-500 mb-6 max-w-2xl mx-auto">
                é»æ“Šä¸‹æ–¹æ—¥æœŸå¡ç‰‡ï¼Œåˆ‡æ›æŸ¥çœ‹ç•¶æ—¥çš„è©³ç´°æ™‚é–“è¡¨ã€äº¤é€šæŒ‡å¼•èˆ‡ç¾é£Ÿæ¨è–¦ã€‚
            </p>

            <!-- Day Selector Tabs -->
            <div class="flex overflow-x-auto space-x-4 pb-4 no-scrollbar mb-6" id="day-tabs">
                <!-- Tabs will be injected by JS -->
            </div>

            <!-- Dynamic Day Content -->
            <div id="day-content" class="bg-white rounded-2xl shadow-lg p-6 min-h-[500px] transition-all duration-300">
                <!-- Content will be injected by JS -->
            </div>
        </section>

        <!-- Food & Shopping Discovery Grid -->
        <section>
            <h2 class="text-2xl font-bold mb-6 text-slate-700">ğŸ´ ç¾é£Ÿèˆ‡è³¼ç‰©æ¸…å–®</h2>
            <div class="bg-white rounded-xl shadow-md p-6">
                <p class="text-gray-600 mb-4">æœ¬è¡Œç¨‹ç²¾é¸äº†å»£å³¶èˆ‡å²¡å±±çš„ä»£è¡¨æ€§ç¾é£Ÿã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹æ–¹æŒ‰éˆ•ç¯©é¸é¡åˆ¥ã€‚</p>
                
                <div class="flex space-x-2 mb-6">
                    <button onclick="filterItems('all')" class="px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-lg text-sm font-medium transition">å…¨éƒ¨é¡¯ç¤º</button>
                    <button onclick="filterItems('food')" class="px-4 py-2 bg-orange-100 hover:bg-orange-200 text-orange-800 rounded-lg text-sm font-medium transition">ç¾é£Ÿ ğŸœ</button>
                    <button onclick="filterItems('shopping')" class="px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-lg text-sm font-medium transition">è³¼ç‰© ğŸ›ï¸</button>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" id="discovery-grid">
                    <!-- Items injected by JS -->
                </div>
            </div>
        </section>

        <!-- Practical Tips Section -->
        <section class="bg-indigo-50 rounded-xl p-8 border border-indigo-100">
            <h2 class="text-xl font-bold text-indigo-900 mb-4">ğŸ’¡ å¯¦ç”¨æ—…éŠå°è²¼å£«</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <h4 class="font-bold text-indigo-700 mb-2">ğŸš„ äº¤é€šç¥¨åˆ¸å»ºè­°</h4>
                    <p class="text-sm text-gray-600">ä¾æ“šæ‚¨çš„è¡Œç¨‹è¨ˆç®—ï¼Œç›´æ¥**åˆ· IC å¡ (Suica/ICOCA) + å–®è²·æ–°å¹¹ç·šè»Šç¥¨**æœ€ç‚ºå½ˆæ€§ä¸”åˆ’ç®—ã€‚JR é—œè¥¿&å»£å³¶å‘¨éŠåˆ¸ (Â¥17,000) è‹¥ç„¡å‰å¾€å§¬è·¯åŸï¼Œå¯èƒ½ç„¡æ³•å›æœ¬ã€‚</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <h4 class="font-bold text-indigo-700 mb-2">ğŸš— è‡ªé§•æ³¨æ„äº‹é …</h4>
                    <p class="text-sm text-gray-600">Day 5 ç§Ÿè»Šå‰å¾€å››åœ‹æ™‚ï¼Œå‹™å¿…ç§Ÿå€Ÿ **ETC å¡**ã€‚ç€¨æˆ¶å¤§æ©‹éè·¯è²»è‹¥ç„¡ ETC æœƒè²´å¾ˆå¤šä¸”éœ€æº–å‚™ç¾é‡‘æ‰¾é›¶ã€‚è«‹é ç´„ 09:00 - 20:00 å²¡å±±ç«™å–é‚„è»Šã€‚</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <h4 class="font-bold text-indigo-700 mb-2">ğŸ¨ ä½å®¿èˆ‡ç¨…é‡‘</h4>
                    <p class="text-sm text-gray-600">å»£å³¶ä½å®¿ `fav HIROSHIMA STADIUM` è·é›¢è»Šç«™ç¨é ï¼Œå»ºè­°å¸¶è¡Œææ™‚æ­è¨ˆç¨‹è»Š (ç´„ Â¥1000)ã€‚Check-in æ™‚å¯èƒ½éœ€æ”¯ä»˜æ¯äººæ¯æ™šç´„ Â¥200 çš„ä½å®¿ç¨…ã€‚</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <h4 class="font-bold text-indigo-700 mb-2">ğŸ§£ å¤©æ°£ç©¿è‘—</h4>
                    <p class="text-sm text-gray-600">2æœˆä¸­æ—¬å»£å³¶èˆ‡å²¡å±±æ°£æº«è¼ƒä½ï¼Œæµ·é‚Š (å®®å³¶ã€é·²ç¾½å±±) é¢¨å¤§ã€‚è«‹å‹™å¿…æ¡å–æ´‹è”¥å¼ç©¿æ³•ï¼Œæ”œå¸¶é˜²é¢¨ä¿æš–å¤–å¥—ã€‚</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white border-t mt-12 py-8">
        <div class="max-w-7xl mx-auto px-4 text-center text-gray-400 text-sm">
            <p>Â© 2025 Hiroshima Okayama Travel Plan generated for User.</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Storage ---
        const tripData = [
            {
                day: 1,
                date: "2/9 (ä¸€)",
                title: "æŠµé”å²¡å±±ï¼Œç›´å¥”å»£å³¶",
                location: "å»£å³¶",
                hotel: "fav HIROSHIMA STADIUM",
                highlights: ["ç§»å‹•æ—¥", "å»£å³¶ç‡’"],
                timeline: [
                    { time: "17:00", activity: "æŠµé”å²¡å±±æ©Ÿå ´ (OKJ)", icon: "ğŸ›¬", note: "å…¥å¢ƒç´„1å°æ™‚" },
                    { time: "18:10", activity: "æ­ä¹˜åˆ©æœ¨æ´¥å·´å£«å¾€å²¡å±±ç«™", icon: "ğŸšŒ", note: "Â¥780/äººï¼Œç´„30åˆ†" },
                    { time: "18:50", activity: "æ–°å¹¹ç·šå‰å¾€å»£å³¶", icon: "ğŸš„", note: "è‡ªç”±å¸­ Â¥5,610/äººï¼Œç´„40åˆ†" },
                    { time: "19:40", activity: "æŠµé”å»£å³¶ï¼Œæ­è¨ˆç¨‹è»Šè‡³é£¯åº—", icon: "ğŸš•", note: "è»Šè³‡ç´„ Â¥1,000" },
                    { time: "20:30", activity: "é£¯åº— Check-in & æ™šé¤", icon: "ğŸ¨", note: "æ¨è–¦ï¼šé›»å…‰çŸ³ç«å»£å³¶ç‡’" }
                ],
                foods: [
                    { name: "é›»å…‰çŸ³ç«", desc: "ç«‹é«”æ„Ÿåè¶³çš„å»£å³¶ç‡’ï¼Œè›‹çš®åŒ…è¦†", type: "dinner" }
                ]
            },
            {
                day: 2,
                date: "2/10 (äºŒ)",
                title: "ç¥ä¹‹å³¶ã€Œå®®å³¶ã€ä¸€æ—¥éŠ",
                location: "å»£å³¶",
                hotel: "fav HIROSHIMA STADIUM",
                highlights: ["åš´å³¶ç¥ç¤¾", "å¤§é³¥å±…", "æ°´æ—é¤¨"],
                timeline: [
                    { time: "09:00", activity: "å‰å¾€å®®å³¶å£ (JR)", icon: "ğŸšƒ", note: "ç´„28åˆ†" },
                    { time: "09:40", activity: "æ­æ¸¡è¼ªè‡³å®®å³¶", icon: "ğŸš¢", note: "JRæ¸¡è¼ªè¼ƒè¿‘é³¥å±…ï¼ŒÂ¥200+ç¨Â¥100" },
                    { time: "10:30", activity: "åš´å³¶ç¥ç¤¾ & å¤§é³¥å±…", icon: "â›©ï¸", note: "æŸ¥è©¢æ½®æ±è¡¨" },
                    { time: "12:30", activity: "è¡¨åƒé“åˆé¤", icon: "ğŸ´", note: "å¿…åƒç‰¡è £ã€ç´…è‘‰é¥…é ­" },
                    { time: "14:00", activity: "å®®å³¶æ°´æ—é¤¨", icon: "ğŸ¬", note: "é–€ç¥¨ Â¥1,420" },
                    { time: "18:30", activity: "è¿”å›å»£å³¶å¸‚å€æ™šé¤", icon: "ğŸŒƒ", note: "æ¨è–¦ï¼šå»£å³¶æ²¾éºµ" }
                ],
                foods: [
                    { name: "ç‰¡è £å±‹", desc: "å¿…é»çƒ¤ç‰¡è £å®šé£Ÿ", type: "lunch" },
                    { name: "ç´…è‘‰å ‚", desc: "ç‚¸ç´…è‘‰é¥…é ­", type: "snack" },
                    { name: "Bakudan-ya", desc: "å»£å³¶è¾£æ²¾éºµ", type: "dinner" }
                ]
            },
            {
                day: 3,
                date: "2/11 (ä¸‰)",
                title: "å»£å³¶å¸‚å€å·¡ç¦® & Outlet",
                location: "å»£å³¶",
                hotel: "fav HIROSHIMA STADIUM",
                highlights: ["åŸçˆ†åœ“é ‚", "Outlet", "æœ¬é€šå•†åº—è¡—"],
                timeline: [
                    { time: "09:30", activity: "å’Œå¹³ç´€å¿µå…¬åœ’ & å»£å³¶åŸ", icon: "ğŸ•Šï¸", note: "è·¯é¢é›»è»Š/å·´å£«å‰å¾€" },
                    { time: "11:30", activity: "åˆé¤ï¼šé•·ç”°å±‹", icon: "ğŸ”¥", note: "äººæ°£å»£å³¶ç‡’" },
                    { time: "13:00", activity: "å‰å¾€ THE OUTLETS HIROSHIMA", icon: "ğŸ›ï¸", note: "å·´å£«ç´„ Â¥300-400" },
                    { time: "17:30", activity: "æœ¬é€šå•†åº—è¡— & PARCO", icon: "ğŸ¬", note: "è—¥å¦æœé£¾æ¡è²·" },
                    { time: "20:00", activity: "æ™šé¤ï¼šé†‰å¿ƒ", icon: "ğŸ¥˜", note: "é‡œé£¯ã€é„‰åœŸæ–™ç†" }
                ],
                foods: [
                    { name: "é•·ç”°å±‹", desc: "å’Œå¹³å…¬åœ’æ—å»£å³¶ç‡’", type: "lunch" },
                    { name: "é†‰å¿ƒ (Sui-shin)", desc: "é‡œé£¯èˆ‡ç‰¡è £æ–™ç†", type: "dinner" }
                ]
            },
            {
                day: 4,
                date: "2/12 (å››)",
                title: "ç§»å‹•æ—¥ & å²¡å±±è³¼ç‰©",
                location: "å²¡å±±",
                hotel: "å²¡å±± Abest Grande",
                highlights: ["ç§»å‹•", "AEON Mall", "å¤šèœœé†¬è±¬æ’"],
                timeline: [
                    { time: "10:30", activity: "æ–°å¹¹ç·šå‰å¾€å²¡å±±", icon: "ğŸš„", note: "è‡ªç”±å¸­ Â¥5,610" },
                    { time: "11:30", activity: "é£¯åº—å¯„æ”¾è¡Œæ", icon: "ğŸ§³", note: "ä½æ–¼ ICOTNICOT" },
                    { time: "12:00", activity: "åˆé¤ï¼šå‘³å¸ é‡æ‘", icon: "ğŸ›", note: "å¤šèœœé†¬ç‚¸è±¬æ’ä¸¼" },
                    { time: "13:00", activity: "å²¡å±±ç«™å‘¨é‚Šè³¼ç‰©", icon: "ğŸ›ï¸", note: "AEON, Bic Camera, å”å‰è¨¶å¾·" },
                    { time: "18:30", activity: "æ™šé¤ï¼šç‡’è‚‰", icon: "ğŸ¥©", note: "Yakiniku King æˆ–å‘¨é‚Š" }
                ],
                foods: [
                    { name: "å‘³å¸ é‡æ‘", desc: "ç¨ç‰¹æ¿ƒéƒå¤šèœœé†¬è±¬æ’", type: "lunch" },
                    { name: "Yakiniku King", desc: "æ—¥å¼ç‡’è‚‰", type: "dinner" }
                ]
            },
         
            {
                day: 5,
                date: "2/13 (äº”)",
                title: "å€‰æ•·ç¾è§€åœ°å€ä¸€æ—¥éŠ",
                location: "å²¡å±±",
                hotel: "å²¡å±± Abest Grande",
                highlights: ["ç™½å£å»ºç¯‰", "éŠèˆ¹", "ç´™è† å¸¶"],
                timeline: [
                    { time: "10:00", activity: "é›»è»Šå‰å¾€å€‰æ•·", icon: "ğŸšƒ", note: "JR ç´„17åˆ†" },
                    { time: "10:30", activity: "å€‰æ•·ç¾è§€æ•£ç­– & éŠèˆ¹", icon: "ğŸ›¶", note: "å…ˆé ç´„èˆ¹ç¥¨ Â¥500" },
                    { time: "13:00", activity: "åˆé¤ & ç”œé»", icon: "ğŸ®", note: "ä¸‰å®…å•†åº— / æœ‰é„°åºµ" },
                    { time: "14:30", activity: "æ„›ç¾å»£å ´ & å•†åº—è¡—", icon: "ğŸ§±", note: "ç´…ç£šå»ºç¯‰ç¾¤" },
                    { time: "16:30", activity: "å€‰æ•· Outlet (é¸é€›)", icon: "ğŸ›ï¸", note: "è»Šç«™åŒ—å£" },
                    { time: "19:00", activity: "æ™šé¤ï¼šé³¥å¥½", icon: "ğŸº", note: "è€å­—è™Ÿå±…é…’å±‹" }
                ],
                foods: [
                    { name: "ä¸‰å®…å•†åº—", desc: "ç”ºå®¶å’–å“©èˆ‡è–ä»£", type: "lunch" },
                    { name: "æœ‰é„°åºµ", desc: "å¹¸ç¦å¸ƒä¸èˆ‡ç”Ÿè›‹æ‹Œé£¯", type: "snack" },
                    { name: "é³¥å¥½", desc: "åœ¨åœ°ç†±é¬§å±…é…’å±‹", type: "dinner" }
                ]
            },
			   {
                day: 5,
                date: "2/14 (å…­)",
                title: "è‡ªé§•ï¼šç€¨æˆ¶å¤§æ©‹ & é‡‘åˆ€æ¯”ç¾…å®®",
                location: "å²¡å±±/é¦™å·",
                hotel: "å²¡å±± Abest Grande",
                highlights: ["ç§Ÿè»Šè‡ªé§•", "è·¨æµ·å¤§æ©‹", "1368éšæ¢¯"],
                timeline: [
                    { time: "09:00", activity: "ç§Ÿè»Šå‡ºç™¼", icon: "ğŸš—", note: "å‹™å¿…ç§Ÿå€Ÿ ETC å¡" },
                    { time: "09:45", activity: "é·²ç¾½å±±ç¬¬äºŒå±•æœ›å°", icon: "ğŸ“¸", note: "çœºæœ›ç€¨æˆ¶å¤§æ©‹" },
                    { time: "11:30", activity: "æŠµé”å››åœ‹ & åˆé¤", icon: "ğŸœ", note: "è®šå²çƒé¾éºµ" },
                    { time: "13:00", activity: "æŒ‘æˆ°é‡‘åˆ€æ¯”ç¾…å®®", icon: "ğŸ§—", note: "å¾¡æœ¬å®®785éš / å¥§ç¤¾1368éš" },
                    { time: "16:00", activity: "é–‹è»Šè¿”å›å²¡å±±", icon: "ğŸŒ‰", note: "ç¶“ç€¨æˆ¶å¤§æ©‹" },
                    { time: "20:00", activity: "å²¡å±±ç«™é‚„è»Š", icon: "ğŸ", note: "åŠ æ²¹å¾Œé‚„è»Š" }
                ],
                foods: [
                    { name: "Konpira Udon", desc: "åƒé“ç™¾å¹´çƒé¾éºµè€åº—", type: "lunch" }
                ]
            },
            {
                day: 7,
                date: "2/15 (æ—¥)",
                title: "å²¡å±±åŸ & æ¡ƒå¤ªéƒå‚³èªª",
                location: "å²¡å±±",
                hotel: "å²¡å±± Abest Grande",
                highlights: ["å‰å‚™æ´¥ç¥ç¤¾", "å¾Œæ¨‚åœ’", "çƒåŸ"],
                timeline: [
                    { time: "09:30", activity: "å‰å‚™æ´¥ç¥ç¤¾", icon: "ğŸ‘¹", note: "æ¡ƒå¤ªéƒå‚³èªªï¼Œ360mè¿´å»Š" },
                    { time: "12:00", activity: "å¸‚å€åˆé¤ï¼šå¾å¦»å£½å¸", icon: "ğŸ£", note: "å²¡å±±æ•£å£½å¸" },
                    { time: "13:30", activity: "å²¡å±±å¾Œæ¨‚åœ’", icon: "ğŸŒ³", note: "æ—¥æœ¬ä¸‰å¤§ååœ’" },
                    { time: "15:30", activity: "å²¡å±±åŸ (çƒåŸ)", icon: "ğŸ¯", note: "é»‘è‰²å¤–è§€å¤©å®ˆé–£" },
                    { time: "18:30", activity: "æ™šé¤ï¼šéš±å²ä¹‹å³¶æ‹‰éºµ", icon: "ğŸœ", note: "é£›é­šé«˜æ¹¯" }
                ],
                foods: [
                    { name: "å¾å¦»å£½å¸", desc: "å²¡å±±åç‰©æ•£å£½å¸ (Barazushi)", type: "lunch" },
                    { name: "éš±å²ä¹‹å³¶æ‹‰éºµ", desc: "é®®ç”œé£›é­šé«˜æ¹¯", type: "dinner" }
                ]
            },
            {
                day: 8,
                date: "2/16 (ä¸€)",
                title: "æœ€å¾Œæ¡è²· & è¿”ç¨‹",
                location: "å²¡å±± -> é«˜é›„",
                hotel: "æº«æš–çš„å®¶",
                highlights: ["æœ€å¾Œè£œè²¨", "æ©Ÿå ´å·´å£«", "è¿”å®¶"],
                timeline: [
                    { time: "09:00", activity: "æ¡è²·ä¼´æ‰‹ç¦®", icon: "ğŸ", note: "å‰å‚™ç³°å­ã€ç™½æ¡ƒæœå‡" },
                    { time: "11:30", activity: "æ‚ é–’åˆé¤", icon: "â˜•", note: "è»Šç«™å‘¨é‚Š" },
                    { time: "13:00", activity: "æ•´ç†è¡Œæ & å¾€å·´å£«ç«™", icon: "ğŸ§³", note: "å²¡å±±ç«™è¥¿å£" },
                    { time: "15:10", activity: "æ©Ÿå ´å·´å£«å¾€æ©Ÿå ´", icon: "ğŸšŒ", note: "å‹™å¿…ææ—©æ’éšŠ" },
                    { time: "17:55", activity: "è™èˆª IT269 èµ·é£›", icon: "ğŸ›«", note: "å†è¦‹å²¡å±±" }
                ],
                foods: [
                    { name: "Sun Station", desc: "è»Šç«™å…§å„é¡ä¼´æ‰‹ç¦®", type: "shopping" }
                ]
            }
        ];

        const discoveryItems = [
            { name: "é›»å…‰çŸ³ç«", type: "food", desc: "å»£å³¶ç‡’ (å»£å³¶)", tag: "å¿…åƒ" },
            { name: "ç‰¡è £å±‹", type: "food", desc: "çƒ¤ç‰¡è £ (å®®å³¶)", tag: "æµ·é®®" },
            { name: "ç´…è‘‰å ‚", type: "food", desc: "ç‚¸ç´…è‘‰é¥…é ­ (å®®å³¶)", tag: "ç”œé»" },
            { name: "é•·ç”°å±‹", type: "food", desc: "å»£å³¶ç‡’ (å’Œå¹³å…¬åœ’)", tag: "æ’éšŠåº—" },
            { name: "é†‰å¿ƒ", type: "food", desc: "é‡œé£¯ (å»£å³¶æœ¬é€š)", tag: "é„‰åœŸ" },
            { name: "THE OUTLETS", type: "shopping", desc: "å¤§å‹ Outlet (å»£å³¶)", tag: "è³¼ç‰©" },
            { name: "å‘³å¸ é‡æ‘", type: "food", desc: "å¤šèœœé†¬è±¬æ’ (å²¡å±±)", tag: "Bç´šç¾é£Ÿ" },
            { name: "Konpira Udon", type: "food", desc: "çƒé¾éºµ (é¦™å·)", tag: "è€åº—" },
            { name: "ä¸‰å®…å•†åº—", type: "food", desc: "è–ä»£/å’–å“© (å€‰æ•·)", tag: "æ°£æ°›" },
            { name: "æœ‰é„°åºµ", type: "food", desc: "å¹¸ç¦å¸ƒä¸ (å€‰æ•·)", tag: "é™é‡" },
            { name: "å¾å¦»å£½å¸", type: "food", desc: "æ•£å£½å¸ (å²¡å±±)", tag: "ç¶“å…¸" },
            { name: "AEON Mall", type: "shopping", desc: "å¤§å‹å•†å ´ (å²¡å±±ç«™)", tag: "è³¼ç‰©" },
            { name: "å‰å‚™ç³°å­", type: "shopping", desc: "æ¡ƒå¤ªéƒä¼´æ‰‹ç¦®", tag: "åç”¢" }
        ];

        // --- Visualization & Interactions ---
        
        // 1. Render Charts
        function renderCharts() {
            // Data derived from markdown content
            const costData = {
                labels: ['æ–°å¹¹ç·š (å²¡å±±-å»£å³¶)', 'æ©Ÿå ´äº¤é€š (ä¾†å›)', 'å®®å³¶ (æ¸¡è¼ª/ç¨…/é–€ç¥¨)', 'ç§Ÿè»Š/éè·¯è²» (ä¼°ç®—)', 'å…¶ä»–äº¤é€š (é›»è»Š/å·´å£«)'],
                data: [11220, 1560, 1720, 4000, 2000] // Estimated JPY per person
            };

            const ctxCost = document.getElementById('costChart').getContext('2d');
            new Chart(ctxCost, {
                type: 'doughnut',
                data: {
                    labels: costData.labels,
                    datasets: [{
                        data: costData.data,
                        backgroundColor: ['#cc4e42', '#475569', '#ffb7b2', '#f59e0b', '#94a3b8'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': Â¥' + context.raw.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });

            // Activity Intensity (Stops per day)
            const activityData = tripData.map(day => day.timeline.length);
            const ctxActivity = document.getElementById('activityChart').getContext('2d');
            new Chart(ctxActivity, {
                type: 'bar',
                data: {
                    labels: ['D1', 'D2', 'D3', 'D4', 'D5', 'D6', 'D7', 'D8'],
                    datasets: [{
                        label: 'æ´»å‹•/ç§»å‹•ç¯€é»æ•¸é‡',
                        data: activityData,
                        backgroundColor: activityData.map((val, i) => i === 4 ? '#f59e0b' : '#ffb7b2'), // Highlight Day 5 (Driving)
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, display: false },
                        x: { grid: { display: false } }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        // 2. Render Itinerary
        let currentDay = 1;

        function renderDayTabs() {
            const tabsContainer = document.getElementById('day-tabs');
            tabsContainer.innerHTML = '';
            
            tripData.forEach(day => {
                const btn = document.createElement('button');
                const isActive = day.day === currentDay;
                btn.className = `flex-shrink-0 px-5 py-3 rounded-xl text-sm transition-all duration-200 ${isActive ? 'tab-active shadow-md' : 'tab-inactive'}`;
                btn.innerHTML = `<span class="block text-xs opacity-80">${day.date}</span><span class="block font-bold">Day ${day.day}</span>`;
                btn.onclick = () => switchDay(day.day);
                tabsContainer.appendChild(btn);
            });
        }

        function switchDay(dayNum) {
            currentDay = dayNum;
            renderDayTabs();
            renderDayContent(dayNum);
        }

        function renderDayContent(dayNum) {
            const data = tripData.find(d => d.day === dayNum);
            const contentDiv = document.getElementById('day-content');
            
            // Animation reset
            contentDiv.style.opacity = '0';
            setTimeout(() => {
                contentDiv.innerHTML = `
                    <div class="border-b border-gray-100 pb-4 mb-6 flex flex-col md:flex-row md:justify-between md:items-start gap-4">
                        <div>
                            <h3 class="text-2xl font-bold text-torii-red flex items-center gap-2">
                                <span class="bg-red-100 text-red-800 text-sm px-2 py-1 rounded-md">Day ${data.day}</span>
                                ${data.title}
                            </h3>
                            <div class="flex items-center gap-4 mt-2 text-sm text-gray-500">
                                <span class="flex items-center gap-1"><i class="fas fa-map-marker-alt"></i> ${data.location}</span>
                                <span class="flex items-center gap-1"><i class="fas fa-bed"></i> ${data.hotel}</span>
                            </div>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            ${data.highlights.map(h => `<span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-bold shadow-sm">âœ¨ ${h}</span>`).join('')}
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Left: Timeline -->
                        <div class="lg:col-span-2">
                            <h4 class="font-bold text-gray-700 mb-4 border-l-4 border-okayama-peach pl-3">æ™‚é–“è»¸è¡Œç¨‹</h4>
                            <div class="relative pl-8 space-y-8">
                                <div class="timeline-line"></div>
                                ${data.timeline.map((item, index) => `
                                    <div class="relative z-10">
                                        <div class="absolute -left-8 bg-white border-2 border-okayama-peach text-xl w-10 h-10 rounded-full flex items-center justify-center shadow-sm">
                                            ${item.icon}
                                        </div>
                                        <div class="bg-gray-50 rounded-lg p-4 hover:shadow-md transition border border-gray-100">
                                            <div class="flex justify-between items-baseline mb-1">
                                                <span class="font-bold text-lg text-gray-800">${item.activity}</span>
                                                <span class="font-mono text-sm text-torii-red font-bold">${item.time}</span>
                                            </div>
                                            ${item.note ? `<p class="text-sm text-slate-500"><i class="fas fa-info-circle mr-1"></i>${item.note}</p>` : ''}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <!-- Right: Food & Tips -->
                        <div class="space-y-6">
                            ${data.foods.length > 0 ? `
                                <div>
                                    <h4 class="font-bold text-gray-700 mb-4 border-l-4 border-orange-300 pl-3">ä»Šæ—¥æ¨è–¦ç¾é£Ÿ</h4>
                                    <div class="space-y-3">
                                        ${data.foods.map(food => `
                                            <div class="bg-orange-50 p-4 rounded-xl border border-orange-100">
                                                <div class="flex justify-between items-start">
                                                    <h5 class="font-bold text-orange-900">${food.name}</h5>
                                                    <span class="text-xs bg-white text-orange-600 px-2 py-0.5 rounded border border-orange-200">${food.type}</span>
                                                </div>
                                                <p class="text-sm text-gray-600 mt-1">${food.desc}</p>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            
                            <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                                <h5 class="font-bold text-blue-900 mb-2 text-sm">ğŸ’¡ ç•¶æ—¥é‡é»æé†’</h5>
                                <p class="text-xs text-blue-800 leading-relaxed">
                                    ${getDayTip(data.day)}
                                </p>
                            </div>
                        </div>
                    </div>
                `;
                contentDiv.style.opacity = '1';
            }, 200);
        }

        function getDayTip(day) {
            const tips = {
                1: "æŠµé”å¾Œå»ºè­°ç›´æ¥æ­è¨ˆç¨‹è»Šå»é£¯åº—æ”¾è¡Œæï¼Œå› ç‚ºè·é›¢è»Šç«™æœ‰æ®µæ­¥è¡Œè·é›¢ã€‚",
                2: "å®®å³¶æ¸¡è¼ªæ­ä¹˜ JR è¥¿æ—¥æœ¬æ¸¡è¼ªï¼Œèˆªç·šæœƒæ¯”è¼ƒé è¿‘å¤§é³¥å±…ã€‚è¨˜å¾—æŸ¥æ½®æ±è¡¨ï¼",
                3: "Outlet å·´å£«ç­æ¬¡è¦æ³¨æ„ï¼Œå»ºè­°å…ˆåœ¨å»£å³¶å·´å£«ä¸­å¿ƒç¢ºèªæ™‚åˆ»è¡¨ã€‚",
                4: "é£¯åº—æ¨“ä¸‹å°±æ˜¯å”å‰è¨¶å¾·ï¼Œæ™šä¸Šç„¡èŠå¯ä»¥éš¨æ™‚å»é€›ã€‚è»Šç«™æ— AEON éå¸¸å¤§ã€‚",
                5: "ç§Ÿè»Šå‹™å¿…ç¢ºèªæœ‰ ETC å¡ã€‚é‡‘åˆ€æ¯”ç¾…å®®éšæ¢¯å¤šï¼Œå»ºè­°åœ¨å±±ä¸‹ç§Ÿå€Ÿæ‰‹æ–ã€‚",
                6: "å€‰æ•·éŠèˆ¹å»ºè­°ä¸€æŠµé”å°±å…ˆå»ã€Œå€‰æ•·é¤¨ã€é ç´„æ™‚æ®µï¼Œä»¥å…å‘éš…ã€‚",
                7: "å‰å‚™æ´¥ç¥ç¤¾çš„é•·å»Šéå¸¸é©åˆæ‹ç…§ã€‚å»å²¡å±±åŸå¯ä»¥é †ä¾¿çœ‹å¾Œæ¨‚åœ’ï¼Œæœ‰å¥—ç¥¨ã€‚",
                8: "æ©Ÿå ´å·´å£«äººå¤šï¼Œå»ºè­°æ­ä¹˜ 15:10 æˆ–æ›´æ—©çš„ç­æ¬¡ä»¥å…è¶•ä¸ä¸Šé£›æ©Ÿã€‚"
            };
            return tips[day] || "äº«å—ä»Šå¤©çš„æ—…ç¨‹ï¼";
        }

        // 3. Discovery Grid
        function renderDiscovery(filter = 'all') {
            const container = document.getElementById('discovery-grid');
            container.innerHTML = '';
            
            const filteredItems = filter === 'all' 
                ? discoveryItems 
                : discoveryItems.filter(item => item.type === filter);

            filteredItems.forEach(item => {
                const bgClass = item.type === 'food' ? 'bg-orange-50 border-orange-100' : 'bg-blue-50 border-blue-100';
                const tagClass = item.type === 'food' ? 'text-orange-600 bg-orange-100' : 'text-blue-600 bg-blue-100';
                const icon = item.type === 'food' ? 'ğŸ´' : 'ğŸ›ï¸';

                container.innerHTML += `
                    <div class="${bgClass} border rounded-lg p-4 flex items-start gap-3 hover:shadow-md transition">
                        <div class="text-2xl">${icon}</div>
                        <div>
                            <div class="flex items-center gap-2 mb-1">
                                <h4 class="font-bold text-gray-800">${item.name}</h4>
                                <span class="text-xs px-2 py-0.5 rounded-full ${tagClass}">${item.tag}</span>
                            </div>
                            <p class="text-sm text-gray-600">${item.desc}</p>
                        </div>
                    </div>
                `;
            });
        }

        function filterItems(type) {
            renderDiscovery(type);
        }

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            renderCharts();
            renderDayTabs();
            renderDayContent(1);
            renderDiscovery();
        });

    </script>
</body>
</html>
